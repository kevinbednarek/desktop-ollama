<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="/src/styles.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Tauri App</title>
    <script type="module" src="/src/main.ts" defer></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/light.css" />
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"></script>
</head>

<body>

<main class="container">
    <nav class="top-nav">
        <button type="button" class="nav-btn" data-panel="chat">Chat</button>
        <button type="button" class="nav-btn" data-panel="models">Models</button>
        <button type="button" class="nav-btn" data-panel="about">About</button>
    </nav>

    <section id="panel-chat" class="panel">
        <div id="stream-chat-msg" class="chat-window"></div>
        <form class="row" id="stream-chat-form">
            <div class="chat-form-row">
                <input id="stream-chat-input" placeholder="Let's chat!" class="chat-input-full"/>
                <button type="submit" id="chat-button">Chat</button>
            </div>
            <div class="chat-form-row">
                <select id="model-select"></select>
                <button id="new-conversation-btn" type="button">New Chat</button>
            </div>
        </form>
    </section>

    <section id="panel-models" class="panel" style="display:none;">
        <ul id="models-list"></ul>

        <form class="row" id="model-download-form">
            <input id="model-download-input" placeholder="Enter a model tag"/>
            <button type="submit" id="model-download-button">Download</button>
        </form>
        <div class="center-link">
            <a id="available-models-link" href="https://ollama.com/library" target="_blank" rel="noopener noreferrer">Available models</a>
        </div>
    </section>

    <section id="panel-about" class="panel" style="display:none;">
        <p>Desktop Ollama UI built with Rust, Tauri, and Typescript.</p>
    </section>

    <!-- Model Info Modal -->
    <div id="model-info-modal" class="modal" style="display:none;">
      <div class="modal-content">
        <span id="model-info-modal-close" class="modal-close">&times;</span>
        <div id="model-info-header" style="text-align:center; margin-bottom:1em;"></div>
        <sl-tab-group id="model-info-tabs">
          <sl-tab slot="nav" panel="info">Model Info</sl-tab>
          <sl-tab slot="nav" panel="license">License</sl-tab>
          <sl-tab slot="nav" panel="parameters">Parameters</sl-tab>
          <sl-tab slot="nav" panel="template">Template</sl-tab>
          <sl-tab-panel name="info"><pre id="model-info-details">Add model info details</pre></sl-tab-panel>
          <sl-tab-panel name="license"><pre id="model-info-license">Add license info</pre></sl-tab-panel>
          <sl-tab-panel name="parameters"><pre id="model-info-parameters">Add parameters</pre></sl-tab-panel>
          <sl-tab-panel name="template"><pre id="model-info-template">Add template</pre></sl-tab-panel>
        </sl-tab-group>
      </div>
    </div>
</main>
<script type="module" src="src/main.ts"></script>
<script>
  const navButtons = document.querySelectorAll('.nav-btn');
  const panels = document.querySelectorAll('.panel');
  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const panel = btn.getAttribute('data-panel');
      panels.forEach(p => {
        p.style.display = (p.id === `panel-${panel}`) ? '' : 'none';
      });
      navButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    });
  });
  // Set default active
  navButtons[0].classList.add('active');
</script>
</body>
</html>
